Added tests using `py tag` and Docker test matrix; fixed multiple issues not detected previously
